<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:t="http://myfaces.apache.org/tomahawk"
  xmlns:mdw="http://www.centurylink.com/mdw/jsf">

  <ui:composition template="layout.xhtml">

    <ui:define name="userInfo">
      <h:form id="userForm">
        <div class="mdw_user" style="display:table;">
          <div style="display:table-row;">
            <div style="display:table-cell;width:100%;">
            </div>
            <div class="mdw_session" style="display:table-cell;width:1px;">
              <h:commandLink
                rendered="#{taskListScopeActionController.adminUrl == null}"
                action="#{userActionController.goMyUserInfo}"
                actionListener="#{userItem.setToCurrentUser}">
                <h:graphicImage
                  value="/images/user.png" 
                  alt="#{authenticatedUser.name}"
                  class="mdw_userIcon" />
                <h:outputText
                  styleClass="mdw_welcomeText"
                  value="#{authenticatedUser.name}" />
              </h:commandLink>
              <h:outputLink
                rendered="#{taskListScopeActionController.adminUrl != null}"
                value="#{taskListScopeActionController.adminUrl}/#/users/#{authenticatedUser.cuid}">
                <h:graphicImage
                  value="/images/user.png" 
                  alt="#{authenticatedUser.name}"
                  class="mdw_userIcon" />
                <h:outputText
                  styleClass="mdw_welcomeText"
                  value="#{authenticatedUser.name}" />
              </h:outputLink>
            </div>
            <div class="mdw_session" style="display:table-cell;">
              <h:commandLink
                action="go_logout"
                styleClass="mdw_actionLink"
                >
                <h:outputText
                  value="Logout" />
                <f:param
                  name="removeSessionCookie"
                  value="true" />
                <f:param
                  name="logoutLocation"
                  value="/#{webUtil.mdwHubContextRoot}/authentication/logout.jsf" />
              </h:commandLink>
            </div>
          </div>
        </div>
      </h:form>
    </ui:define>
        
    <ui:define name="mainContent">
      <ui:fragment rendered="#{authenticatedUser.loaded}">
        <ui:include src="tabs.xhtml" />
      </ui:fragment>
      <h:outputText
        rendered="#{!authenticatedUser.loaded}"
        value="[User not found in database]"
        styleClass="mdw_contextMessages" />    
    </ui:define>
  
  </ui:composition>

</html>