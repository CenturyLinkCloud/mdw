<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:t="http://myfaces.apache.org/tomahawk"
  xmlns:mdw="http://www.centurylink.com/mdw/jsf"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:a4j="http://richfaces.org/a4j">
  
  <ui:composition>
    <a4j:form id="groupUserAdminForm" ajaxSubmit="true" reRender="groupTree" styleClass="mdw_form">       
      <t:panelGrid
        columns="3"
        width="100%"
        cellpadding="6"
        cellspacing="2"
        columnClasses="mdw_label,mdw_value">

        <mdw:label
          for="userId"
          value="User ID:"
          required="true" />
        <h:inputText
          id="userId"
          value="#{userItem.cuid}"
          required="true"
          disabled="true"
          size="50"
          style="width:125px;"
          styleClass="mdw_inputField" /> 
        <rich:message for="userId" errorClass="mdw_error" />
        
        <mdw:label
          for="userName"
          value="Name:"
          required="true" />
        <h:inputText
          id="userName"
          value="#{userItem.name}"
          required="#{workgroupTree.userAllowedToEditSelection}"
          size="150"
          style="width:300px;"
          styleClass="mdw_inputField" />
        <rich:message for="userName" errorClass="mdw_error" />
        
        <t:panelGroup colspan="3">
          <rich:panel styleClass="mdw_defaultPanel" style="margin-left:0;">
            <f:facet name="header">
              <h:panelGrid columns="2" cellpadding="0" cellspacing="0" columnClasses="mdw_left,mdw_right">
                <h:outputText value="Roles for user '#{userItem.name}' in group '#{workgroupTree.scopedUser.parentGroup.groupName}'" />
                <a4j:commandLink 
                  id="showWorkgroups" 
                  title="Show Workgroups"
                  action="#{workgroupTree.setUserMode}"
                  reRender="adminDetailPanel">
                  <h:graphicImage value="/images/group.gif" alt="Group" styleClass="mdw_toolbarBtn" />
                </a4j:commandLink>
              </h:panelGrid>
            </f:facet>
          
            <mdw:pickList
              itemsLabel="Roles"
              disabled="#{!workgroupTree.userAllowedToEditSelection}"
              controller="#{userActionController}"
              controllerAction="selectedValueChanged"
              availableItems="#{userItem.rolesNotForUser}"
              selectedItems="#{userItem.rolesForUser}" />
          </rich:panel>
        </t:panelGroup>
        
        <t:panelGroup rendered="#{userItem.editableByCurrentUser}" colspan="3">
          <h:commandButton 
            id="saveUser"
            value="Save User"
            action="#{workgroupTree.saveUser}" />
          <h:commandButton
            id="deleteUser" 
            value="Delete User"
            onclick="return false;"
            style="margin-left:15px;">
            <rich:componentControl
              for="deleteDlg"
              attachTo="deleteUser" operation="show" event="onclick" />
          </h:commandButton>
        </t:panelGroup>
        
        <t:panelGroup colspan="3">
          <a4j:status>
            <f:facet name="start">
              <h:graphicImage style="margin-left:5px;" value="/images/loading.gif" />
            </f:facet>
            <f:facet name="stop">
              <a4j:outputPanel ajaxRendered="true">
                <h:messages showDetail="true" globalOnly="true" styleClass="mdw_message" style="margin-left:10px;" />
              </a4j:outputPanel>
            </f:facet>
          </a4j:status>
        </t:panelGroup>
      </t:panelGrid>
    </a4j:form>
  </ui:composition>
  
</html>