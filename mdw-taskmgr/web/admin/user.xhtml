<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:t="http://myfaces.apache.org/tomahawk"
  xmlns:mdw="http://www.centurylink.com/mdw/jsf"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:a4j="http://richfaces.org/a4j">
  
  <ui:composition>
    <a4j:form id="userAdminForm" ajaxSubmit="true" reRender="groupTree" styleClass="mdw_form">       
      <t:panelGrid
        columns="3"
        width="100%"
        cellpadding="6"
        cellspacing="2"
        columnClasses="mdw_label,mdw_value,mdw_validation">

        <mdw:label
          for="userId"
          value="User ID:"
          required="true" />
        <h:inputText
          id="userId"
          value="#{userItem.cuid}"
          required="#{workgroupTree.addMode}"
          disabled="#{!workgroupTree.addMode}"
          size="50"
          style="width:125px;"
          styleClass="mdw_inputField" /> 
        <rich:message for="userId" errorClass="mdw_error" />
        
        <mdw:label
          for="userName"
          value="Name:"
          required="#{userItem.editableByCurrentUser}" />
        <h:inputText
          id="userName"
          value="#{userItem.name}"
          required="#{userItem.editableByCurrentUser}"
          size="150"
          style="width:300px;"          
          styleClass="mdw_inputField" />
        <rich:message for="userName" errorClass="mdw_error" />
        
        <t:panelGroup colspan="3">
          <rich:panel header="Workgroup Membership" styleClass="mdw_defaultPanel" style="margin-left:0;">
            <mdw:pickList
              itemsLabel="Groups"
              disabled="#{!userItem.editableByCurrentUser}"
              controller="#{userActionController}"
              controllerAction="selectedValueChanged"
              availableItems="#{userItem.workgroupsNotForUser}"
              selectedItems="#{userItem.workgroupsForUser}" />
          </rich:panel>
        </t:panelGroup>
        
        <t:panelGroup rendered="#{workgroupTree.addMode &amp;&amp; workgroupTree.addType == 'User'}" colspan="3">
          <a4j:commandButton
            id="createUser"
            value="Create User"
            action="#{workgroupTree.createUser}"
            reRender="adminDetailPanel" />
          <a4j:commandButton 
            id="cancelUser"
            type="reset"
            immediate="true"
            value="Cancel"
            actionListener="#{workgroupTree.cancelAddMode}"
            reRender="adminDetailPanel"
            style="margin-left:15px;" />
        </t:panelGroup>
        <t:panelGroup rendered="#{!workgroupTree.addMode &amp;&amp; userItem.editableByCurrentUser}" colspan="3">
          <h:commandButton 
            id="saveUser"
            value="Save User"
            action="#{workgroupTree.saveUser}" />
          <h:commandButton
            id="deleteUser"
            value="Delete User"
            onclick="return false;"
            style="margin-left:15px;">
            <rich:componentControl
              for="deleteDlg"
              attachTo="deleteUser" operation="show" event="onclick" />
          </h:commandButton>
        </t:panelGroup>
        
        <t:panelGroup colspan="3">
          <a4j:status>
            <f:facet name="start">
              <h:graphicImage style="margin-left:5px;" value="/images/loading.gif" />
            </f:facet>
            <f:facet name="stop">
              <a4j:outputPanel ajaxRendered="true">
                <h:messages showDetail="true" globalOnly="true" styleClass="mdw_message" style="margin-left:15px;" />
              </a4j:outputPanel>
            </f:facet>
          </a4j:status>
        </t:panelGroup>
      </t:panelGrid>
    </a4j:form>
  </ui:composition>
  
</html>