<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:t="http://myfaces.apache.org/tomahawk"
  xmlns:mdw="http://www.centurylink.com/mdw/jsf"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:a4j="http://richfaces.org/a4j">
  
  <ui:composition>

    <a4j:form id="groupAdminForm" ajaxSubmit="true" reRender="groupTree" styleClass="mdw_form">       
      <t:panelGrid
        columns="3"
        width="100%"
        cellpadding="6"
        cellspacing="2"
        columnClasses="mdw_label,mdw_value,mdw_error">

        <mdw:label
          for="groupName"
          value="Group Name:"
          required="#{workgroupItem.id != 0 &amp;&amp; workgroupItem.editableByCurrentUser}" />
        <h:inputText
          id="groupName"
          value="#{workgroupItem.name}"
          required="#{workgroupItem.editableByCurrentUser}"
          size="60"
          disabled="#{workgroupItem.id == 0 || !workgroupItem.editableByCurrentUser}"
          styleClass="mdw_inputField" /> 
        <rich:message for="groupName" errorClass="mdw_error" />
        
        <mdw:label
          for="groupDescription"
          value="Description:" />
        <h:inputText
          id="groupDescription"
          value="#{workgroupItem.description}"
          size="100"
          disabled="#{workgroupItem.id == 0 || !workgroupItem.editableByCurrentUser}"
          styleClass="mdw_inputField" />
        <rich:message for="groupDescription" errorClass="mdw_error" />
        
        <mdw:label
          for="parentGroup"
          value="Parent Group:"
          disabled="#{workgroupItem.id == 0 || workgroupItem.name == 'Site Admin' || !workgroupItem.editableByCurrentUser}" />
        <h:selectOneMenu
          id="parentGroup"
          value="#{workgroupItem.parentGroup}"
          disabled="#{workgroupItem.id == 0 || workgroupItem.name == 'Site Admin' || !workgroupItem.editableByCurrentUser}"
          styleClass="mdw_inputField">
          <f:selectItems value="#{workgroupTree.parentGroupSelectItems}" />
        </h:selectOneMenu>
        <mdw:blank />
          
        <t:panelGroup colspan="3">
          <rich:panel header="Users for Group" styleClass="mdw_defaultPanel" style="margin-left:0;">
            <mdw:pickList
              itemsLabel="Users"
              disabled="#{workgroupItem.id == 0 || !workgroupItem.editableByCurrentUser}"
              controller="#{workgroupActionController}"
              controllerAction="selectedValueChanged"
              availableItems="#{workgroupItem.usersNotInWorkgroup}"
              selectedItems="#{workgroupItem.usersInWorkgroup}" />
          </rich:panel>
        </t:panelGroup>
        
        <t:panelGroup rendered="#{workgroupTree.addMode &amp;&amp; workgroupTree.addType == 'Group'}" colspan="3">
          <a4j:commandButton
            id="createGroup"
            value="Create Group"
            action="#{workgroupTree.createGroup}"
            reRender="adminDetailPanel" />
          <a4j:commandButton 
            id="cancelGroup"
            type="reset"
            immediate="true"
            value="Cancel"
            actionListener="#{workgroupTree.cancelAddMode}"
            reRender="adminDetailPanel"
            style="margin-left:15px;" />
        </t:panelGroup>
        
        <t:panelGroup rendered="#{!workgroupTree.addMode &amp;&amp; workgroupItem.editableByCurrentUser}" colspan="3">
          <h:commandButton 
            id="saveGroup"
            value="Save Group"
            action="#{workgroupTree.saveGroup}" />
          <h:commandButton
            id="deleteGroup" 
            value="Delete Group"
            onclick="return false;"
            style="margin-left:15px;">
            <rich:componentControl
              for="deleteDlg"
              attachTo="deleteGroup" operation="show" event="onclick"/>
          </h:commandButton>
        </t:panelGroup>
        
        <t:panelGroup colspan="3">
          <a4j:status>
            <f:facet name="start">
              <h:graphicImage style="margin-left:5px;" value="/images/loading.gif" />
            </f:facet>
            <f:facet name="stop">
              <a4j:outputPanel ajaxRendered="true">
                <h:messages showDetail="true" globalOnly="true" styleClass="mdw_message" style="margin-left:10px;" />
              </a4j:outputPanel>
            </f:facet>
          </a4j:status>
        </t:panelGroup>
      </t:panelGrid>
    </a4j:form>
  </ui:composition>

</html>