# RSA ClearTrust web agent configuration file for private deployment environment
# for applications to be deployed to the ECOM environment.
#
# Version: $Id: webagent.conf,v 1.3 2013/08/19 22:35:07 dxoakes Exp $
#
# See http://qshare.ad.qintra.com/sites/cleartrust/ECOM/webagent-with-comments.conf
# for the RSA ClearTrust default version of this file that has more complete
# comments describing each of these properties (but with their default values).
#
# More detailed instructions of installing and configuring the CT agent
# are available at:
# https://atssec.qwest.net:7744/agent/cleartrust/46/docs/WebServersInstallConfig.htm
#
# Details of how to use this file are provided in Appendix A of the
# "ClearTrust Authentication and Access Control for ECOM Applications--
# Application Developer.s Guide", available on the Application Security team's
# sharepoint at:
#  http://qshare.ad.qintra.com/sites/cleartrust/ECOM/ct-ecom-appl-dev-guide.doc
#
# NOTE: This file MUST be renamed to 'webagent.conf' for it to be used!!!
#
# The %%APPLICATION%% and %%COOKIEDOMAIN%% entries below must be substituted
# with appropriate values (see the Aplication Developer's Guide"). Aside
# from these, generally the only thing you will need to change is in
# the <VirtualHost> section at the very end. But also search for the term
# 'troubleshooting' if you are having problems.
#                                   - Application Security Team
#
<Global>

# log_level can be set to Debug for troubleshooting
cleartrust.agent.log_level=Critical

# New 4.8.0.46 Properties
# Specifies that cookies should be marked as secure over a non-SSL connection.
# The parameter is only evaluated if cleartrust.agent.secure=True
cleartrust.agent.set_cookie_secure=False

# New Params in 4.8
#Replaced cleartrust.agent.retain_url.use_full_url_for_ct_orig_url=False
cleartrust.agent.retain_url.use_full_url_for_ct_orig_uri=False
cleartrust.agent.exported_headers=
cleartrust.agent.ct_print_log_level=None
cleartrust.agent.retain_url.use_parameter=Both
cleartrust.agent.httponly=True
cleartrust.agent.trusted_domains_list=dev.qintra.com,qwest.com

# New 4.7 Properties
cleartrust.agent.retain_url.preserve_query_string=False
# Causes agent to be able to support UTF-8 passwords.
# If not set, agent only supports 7-bit clear (ASCII) passwds.
cleartrust.agent.client_encoding=UTF-8

# If web server has daily bounces 04 is ok.  If ctagent.log rolls over
# Apache will hang unless this is set to 20.  20 will cause multiple logs.
cleartrust.agent.log_flags=20
cleartrust.agent.log_file= /opt/apache/mdw51-taskmgr-50605/server/logs/ctagent.log
cleartrust.agent.log_file_rotation_maxsize=200 Mbs
cleartrust.agent.log_file_rotation_interval=150 Hrs
cleartrust.agent.log_format="%t - [%p%i] - <%d> - "
cleartrust.agent.log_pool_option=None
cleartrust.agent.debug_modules=
cleartrust.agent.protected_resource_cache_ttl=10 Mins
cleartrust.agent.protected_resource_cache_size=10000
cleartrust.agent.unprotected_resource_cache_ttl=5 Mins
cleartrust.agent.unprotected_resource_cache_size=10000
cleartrust.agent.authz_allow_cache_ttl=5 Mins
cleartrust.agent.authz_allow_cache_size=10000
cleartrust.agent.authz_deny_cache_ttl=10 Mins
cleartrust.agent.authz_deny_cache_size=10000
cleartrust.agent.token_cache_ttl=5 Mins
cleartrust.agent.token_cache_size=10000
cleartrust.agent.shared_pool.enable=True
cleartrust.agent.user_properties_cache_ttl=10 Mins
cleartrust.agent.user_properties_cache_size=10000
#cleartrust.agent.web_server_name=%%APPLICATION%%
cleartrust.agent.web_server_name=qwest.ecom.mdw51-taskmgr
cleartrust.agent.wax=
cleartrust.agent.sso=True
cleartrust.agent.session_lifetime=8 Hrs
cleartrust.agent.idle_timeout=20 Mins
cleartrust.agent.post_url_idle_timeout=0 Secs
cleartrust.agent.auto_challenge=True
cleartrust.agent.fudge_factor=5 Mins
#cleartrust.agent.cookie_domain=%%COOKIEDOMAIN%%
cleartrust.agent.cookie_domain=.dev.qintra.com
cleartrust.agent.path=/
cleartrust.agent.secure=False
cleartrust.agent.cookie_expiration=0 Mins

# Be careful when setting ip_check to True. Requires cleartrust.agent.secure to be true.
# Forces cookies to be sent over https. This will break AOL users and is not recommended
cleartrust.agent.cookie_ip_check=False
cleartrust.agent.trusted_proxy_header_name=X-Forwarded-For
cleartrust.agent.trusted_proxy_list=10.1.239.141,10.1.239.142,10.1.239.201,10.1.239.202,10.6.208.10,10.6.208.11,10.6.208.12,10.6.208.13
cleartrust.agent.trusted_proxy_strict_mode=False
cleartrust.agent.cookie_touch_window=30 Secs
cleartrust.agent.allow_subnet_masking=False
cleartrust.agent.ip_check_exclusion_list=
cleartrust.agent.cookie_exclusion_list=
cleartrust.agent.user_header_list=
cleartrust.agent.userprops=x-ctallgroups
cleartrust.agent.userprops_level=AuthN
cleartrust.agent.multivalue_userprops_oneset=True
cleartrust.agent.one_userprops_header=False
cleartrust.agent.strict_headers_export=True
cleartrust.agent.export_session_init_time=True
cleartrust.agent.export_session_expiration_time=True
cleartrust.agent.export_last_touch_time=True
cleartrust.agent.export_cookie_user_buffer=True
cleartrust.agent.form_based_enabled=True
cleartrust.agent.externalize_forms=False
cleartrust.agent.retain_url=True
cleartrust.agent.retain_url.use_full_url=True
cleartrust.agent.retain_url.use_query_string=False
cleartrust.agent.realm=CT
cleartrust.agent.ignore_http_auth=False
cleartrust.agent.shared_secret=
cleartrust.agent.custom_auth=

# Authentication type for ECOM deployments use BASIC for MNET and MyAccount pools and either
# CERTIFICATE or BASIC for the ECOM pool.
# cleartrust.agent.auth_resource_list=/*=%%AUTHENTICATIONTYPE%%
cleartrust.agent.auth_resource_list=/*=BASIC
cleartrust.agent.default_auth_mode=BASIC
cleartrust.agent.attempt_multiple_authentications=False
cleartrust.agent.certdn_attr_name_map=
cleartrust.agent.reverse_certificate_dn=True
cleartrust.agent.convert_certificate_dn_delimiter=True
cleartrust.agent.default_language=en
cleartrust.agent.accepted_languages_list=
cleartrust.agent.url_exclusion_list=

# You may also want to add js (JavaScript) and css (Cascading Style Sheets)
# here if they do not need to be protected. It will help performance.
cleartrust.agent.extension_exclusion_list=gif,jpg,css,js,png,ico
cleartrust.agent.apache.pass_realms=!*
cleartrust.agent.login_home_location=/cleartrust/ct_home_<%language%>.html
cleartrust.agent.login_form_location_iwa=/cleartrust/iwa/ct_home.asp
cleartrust.agent.logout_form_location=/cleartrust/ct_logout_<%language%>.html
cleartrust.agent.login_form_location_basic=/cleartrust/ct_logon_<%language%>.html
cleartrust.agent.login_error_user_location_basic=/cleartrust/ct_logon_failed_<%language%>.html
cleartrust.agent.login_error_pw_location_basic=/cleartrust/ct_logon_failed_<%language%>.html
cleartrust.agent.login_form_location_securid=/cleartrust/ct_logon.jsp?CTAuthMode=SECURID&language=<%language%>
cleartrust.agent.login_form_location_sid_nexttoken=/cleartrust/ct_securid.jsp?SecurIdMode=nexttoken&language=<%language%>
cleartrust.agent.login_form_location_sid_newpin=/cleartrust/ct_securid.jsp?SecurIdMode=newpin&language=<%language%>
cleartrust.agent.login_form_location_sid_passcode=/cleartrust/ct_securid.jsp?SecurIdMode=passcode&language=<%language%>
cleartrust.agent.login_error_location_securid=/cleartrust/ct_logon.jsp?CTAuthMode=SECURID&CTLoginErrorMsg=Authentication%20Error&language=<%language%>
cleartrust.agent.login_form_location_nt=/cleartrust/ct_logon_nt_<%language%>.html
cleartrust.agent.login_error_user_location_nt=/cleartrust/ct_logon_failed_nt_<%language%>.html
cleartrust.agent.login_error_pw_location_nt=/cleartrust/ct_logon_failed_nt_<%language%>.html
cleartrust.agent.login_form_location_mobile=
cleartrust.agent.login_error_password_expired=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.login_error_password_expired_forced=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.login_error_password_expired_new_user=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.login_form_location_custom=/cleartrust/ct_logon_custom_<%language%>.html
cleartrust.agent.login_error_user_location_custom=/cleartrust/ct_logon_failed_custom_<%language%>.html
cleartrust.agent.login_error_pw_location_custom=/cleartrust/ct_logon_failed_custom_<%language%>.html
cleartrust.agent.login_cert_invalid_user=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.login_auth_inactive_account=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.login_auth_expired_account=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.login_auth_user_locked_out=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.login_auth_url_access_denied=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.login_server_error=/cleartrust/ct_access_denied_<%language%>.html
cleartrust.agent.server_pool=EMPLOYEE-Test
cleartrust.agent.console_port=5628
cleartrust.agent.rules_file=
cleartrust.agent.auth_type_mapping=
cleartrust.agent.cookie_name=APPSEC_EMP_SESSION
cleartrust.agent.enabled=True
</Global>

<Pool id=EMPLOYEE-Test>
    # Localizing traffic to CT servers. You may want to do this for
    # applicatons with high volume traffic to ClearTrust.
    #
    # For Apache proxies in Omaha, list dispatchers in this order:
    #	ctdisp-net.dev.qintra.com:port#,ctdisp-cot.dev.qintra.com:port#
    # to get Omaha CT servers preferred.
    # For Apache proxies in Denver, list dispatchers in this order:
    #	ctdisp-cot.dev.qintra.com:port#,ctdisp-net.dev.qintra.com:port#
    # to get Denver CT servers preferred, where port# is the appropriate
    # port # (5608 for Consumer, 6608 for Employee, and 7608 for Partner CT).
    #
    # You must ALSO change the dispatcher property from RANDOMIZED to STANDARD
    #   cleartrust.agent.dispatcher_mode=STANDARD
    #
cleartrust.agent.dispatcher_mode=RANDOMIZED
    # When dispatcher_mode is set to RANDOMIZED (recommended)
    # then CT dispatcher list is randomly ordered so that neither CT
    # location is preferred. When dispatcher mode is set to STANDARD,
    # dispatchers are used in the order specified, localizing traffic
    # to CT auth servers. It is recommended that one dispatcher from Omaha
    # and one from Denver be listed so as to have fail over across data
    # centers.
cleartrust.agent.dispatcher_list=ct-disp-net1.dev.qintra.com:6608,ct-disp-net2.dev.qintra.com:6608
#cleartrust.agent.dispatcher_list=ctdisp-net.dev.qintra.com:6608,ctdisp-cot.dev.qintra.com:6608
# OLD: cleartrust.agent.dispatcher_list=ecomt083.dev.qintra.com:6608,ecomt084.dev.qintra.com:6608
cleartrust.agent.dispatcher_timeout=10 Secs
cleartrust.agent.auth_server_pool_refresh=1 Hrs
cleartrust.agent.ssl.use=Anon
cleartrust.agent.ssl.keystore=
cleartrust.agent.ssl.ca_keystore=
cleartrust.agent.ssl.keystore_passphrase=
cleartrust.agent.ssl.private_key_passphrase=
cleartrust.agent.ssl.private_key_alias=
cleartrust.agent.ssl.ca_keystore_passphrase=
cleartrust.agent.auth_server_list=
cleartrust.agent.auth_server_timeout=30 Secs
cleartrust.agent.auth_server_mode=DISTRIBUTED
cleartrust.agent.location_class_priority=
cleartrust.agent.keyserver_list=
cleartrust.agent.key_client_name=
cleartrust.agent.key_client_secret=
cleartrust.agent.retry_count=5
cleartrust.agent.socket_tcp_nodelay=True
cleartrust.agent.max_open_connections=0
</Pool>
<Pool id=PARTNER-Test>
    # Localizing traffic to CT servers. You may want to do this for
    # applicatons with high volume traffic to ClearTrust.
    #
    # For Apache proxies in Omaha, list dispatchers in this order:
    #	ctdisp-net.dev.qintra.com:port#,ctdisp-cot.dev.qintra.com:port#
    # to get Omaha CT servers preferred.
    # For Apache proxies in Denver, list dispatchers in this order:
    #	ctdisp-cot.dev.qintra.com:port#,ctdisp-net.dev.qintra.com:port#
    # to get Denver CT servers preferred, where port# is the appropriate
    # port # (5608 for Consumer, 6608 for Employee, and 7608 for Partner CT).
    #
    # You must ALSO change the dispatcher property from RANDOMIZED to STANDARD
    #   cleartrust.agent.dispatcher_mode=STANDARD
    #
cleartrust.agent.dispatcher_mode=RANDOMIZED
    # When dispatcher_mode is set to RANDOMIZED (recommended)
    # then CT dispatcher list is randomly ordered so that neither CT
    # location is preferred. When dispatcher mode is set to STANDARD,
    # dispatchers are used in the order specified, localizing traffic
    # to CT auth servers. It is recommended that one dispatcher from Omaha
    # and one from Denver be listed so as to have fail over across data
    # centers.
cleartrust.agent.dispatcher_list=ctdisp-net.dev.qintra.com:7608,ctdisp-cot.dev.qintra.com:7608
# OLD: cleartrust.agent.dispatcher_list=ecomt083.dev.qintra.com:7608,ecomt084.dev.qintra.com:7608
cleartrust.agent.dispatcher_timeout=10 Secs
cleartrust.agent.auth_server_pool_refresh=1 Hrs
cleartrust.agent.ssl.use=Auth
cleartrust.agent.ssl.keystore= /opt/apache/mdw51-taskmgr-50605/server/certs/OffSite.p12
cleartrust.agent.ssl.ca_keystore= /opt/apache/mdw51-taskmgr-50605/server/certs/OffSite.p12
cleartrust.agent.ssl.keystore_passphrase=admin123
cleartrust.agent.ssl.private_key_passphrase=admin123
cleartrust.agent.ssl.private_key_alias=OffSite
cleartrust.agent.ssl.ca_keystore_passphrase=admin123
cleartrust.agent.auth_server_list=
cleartrust.agent.auth_server_timeout=30 Secs
cleartrust.agent.auth_server_mode=DISTRIBUTED
cleartrust.agent.location_class_priority=
cleartrust.agent.keyserver_list=
cleartrust.agent.key_client_name=
cleartrust.agent.key_client_secret=
cleartrust.agent.retry_count=5
cleartrust.agent.socket_tcp_nodelay=True
cleartrust.agent.max_open_connections=0
</Pool>
<Pool id=CONSUMER-Test>
    # Localizing traffic to CT servers. You may want to do this for
    # applicatons with high volume traffic to ClearTrust.
    #
    # For Apache proxies in Omaha, list dispatchers in this order:
    #	ctdisp-net.dev.qintra.com:port#,ctdisp-cot.dev.qintra.com:port#
    # to get Omaha CT servers preferred.
    # For Apache proxies in Denver, list dispatchers in this order:
    #	ctdisp-cot.dev.qintra.com:port#,ctdisp-net.dev.qintra.com:port#
    # to get Denver CT servers preferred, where port# is the appropriate
    # port # (5608 for Consumer, 6608 for Employee, and 7608 for Partner CT).
    #
    # You must ALSO change the dispatcher property from RANDOMIZED to STANDARD
    #   cleartrust.agent.dispatcher_mode=STANDARD
    #
cleartrust.agent.dispatcher_mode=RANDOMIZED
    # When dispatcher_mode is set to RANDOMIZED (recommended)
    # then CT dispatcher list is randomly ordered so that neither CT
    # location is preferred. When dispatcher mode is set to STANDARD,
    # dispatchers are used in the order specified, localizing traffic
    # to CT auth servers. It is recommended that one dispatcher from Omaha
    # and one from Denver be listed so as to have fail over across data
    # centers.
cleartrust.agent.dispatcher_list=ctdisp-net.dev.qintra.com:5608,ctdisp-cot.dev.qintra.com:5608
# OLD: cleartrust.agent.dispatcher_list=ecomt083.dev.qintra.com:5608,ecomt084.dev.qintra.com:5608
cleartrust.agent.dispatcher_timeout=10 Secs
cleartrust.agent.auth_server_pool_refresh=1 Hrs
cleartrust.agent.ssl.use=Auth
cleartrust.agent.ssl.keystore= /opt/apache/mdw51-taskmgr-50605/server/certs/OffSite.p12
cleartrust.agent.ssl.ca_keystore= /opt/apache/mdw51-taskmgr-50605/server/certs/OffSite.p12
cleartrust.agent.ssl.keystore_passphrase=admin123
cleartrust.agent.ssl.private_key_passphrase=admin123
cleartrust.agent.ssl.private_key_alias=OffSite
cleartrust.agent.ssl.ca_keystore_passphrase=admin123
cleartrust.agent.auth_server_list=
cleartrust.agent.auth_server_timeout=30 Secs
cleartrust.agent.auth_server_mode=DISTRIBUTED
cleartrust.agent.location_class_priority=
cleartrust.agent.keyserver_list=
cleartrust.agent.key_client_name=
cleartrust.agent.key_client_secret=
cleartrust.agent.retry_count=5
cleartrust.agent.socket_tcp_nodelay=True
cleartrust.agent.max_open_connections=0
</Pool>

<VirtualHost name=* address=* port=*>
cleartrust.agent.enabled=True
cleartrust.agent.cookie_name=APPSEC_EMP_SESSION
cleartrust.agent.server_pool=EMPLOYEE-Test
# use IOM's entitlements
cleartrust.agent.web_server_name=qwest.ecom.IOM
cleartrust.agent.idle_timeout=240 Mins
cleartrust.agent.login_home_location=/MDWTaskManagerWeb/facelets/tasks/myTasks.jsf
cleartrust.agent.logout_form_location=/MDWTaskManagerWeb/facelets/authentication/logout.jsf
cleartrust.agent.login_form_location_basic=/MDWTaskManagerWeb/facelets/authentication/login.jsf
cleartrust.agent.login_error_user_location_basic=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
cleartrust.agent.login_error_pw_location_basic=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
cleartrust.agent.login_error_password_expired=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
cleartrust.agent.login_error_password_expired_forced=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
cleartrust.agent.login_error_password_expired_new_user=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
cleartrust.agent.login_auth_inactive_account=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
cleartrust.agent.login_auth_expired_account=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
cleartrust.agent.login_auth_user_locked_out=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
cleartrust.agent.login_auth_url_access_denied=/MDWTaskManagerWeb/facelets/authentication/accessDenied.jsf
cleartrust.agent.login_server_error=/MDWTaskManagerWeb/facelets/authentication/loginError.jsf
</VirtualHost>
