setenv:
-------
WEB_EXT_PROP_DIR="/opt/apps/share/properties/<instance>.resources"
JAVA_OPTS="-server -Xms768m -Xmx768m -XX:PermSize=64m -XX:MaxPermSize=256m -XX:+UseParallelGC -Dweb.external.propdir="$WEB_EXT_PROP_DIR""

(in /opt/web/servicemix/instances/<instance>/etc)
ln -s /opt/apps/share/properties/<instance>.resources/com.centurylink.mdw.cfg com.centurylink.mdw.cfg

comment out these lines in jre.properties under jre-1.6:
--------------------------------------------------------
# javax.xml.stream, \
# javax.xml.stream.events, \
# javax.xml.stream.util, \

features:list | grep "\[installed  \]"

features:install spring
features:install spring-dm
features:install activemq
features:install activemq-spring
features:install camel

features:addurl mvn:com.centurylink.mdw/mdw-cxf/2.4.6/xml/features
features:install mdw-cxf
features:install mdw-camel-cxf

# features:install servicemix-mail (not needed)
install -s mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.scripting-api-1.0/1.9.0

install -s mvn:org.springframework/spring-jms/3.0.6.RELEASE

create an ActiveMQ broker in Blueprint format:
----------------------------------------------
http://cshare.ad.qintra.com/sites/MDW/Developer%20Resources/Environment/ServiceMix/Example%20ActiveMQ%20Config/readme.txt
(see: To create a Blueprint-style ActiveMQ broker configuration in a Linux dev instance.) 


enabling cleartrust webagent authentication
-------------------------------------------
 - setup Apache proxy as on lxdenvmtc144.dev.qintra.com (httpd.conf, extras/proxy.conf)
 - uncomment this line in etc/org.ops4j.pax.web.cfg:
     org.ops4j.pax.web.config.file=etc/jetty.xml
 - change in etc/jetty.xml (to match values in org.ops4j.pax.web.cfg):
     <Set name="port"><Property name="jetty.port" default="100XX"/></Set>
     <Set name="confidentialPort">200XX</Set>
 - add to etc/jetty.xml:
     <Set name="forwarded">true</Set>
     <Set name="forwardedForHeader">none</Set>
 - place these two files from MDWWeb/META-INF/mdw into the ServiceMix instance etc directory:
     CTAPPFilter.config
     CTECOMFilter.config
 - comment out this line in etc/CTAPPFilter.config:
     #useLdapFilter=true
 - add to etc/system.properties:
     com.qwest.appsec.CTECOMFilterConfigFilePath=etc/CTECOMFilter.config
     com.qwest.appsec.CTAPPFilterConfigFilePath=etc/CTAPPFilter.config
 - in etc/com.centurylink.mdw.cfg
     change MDWFramework.TaskManagerWeb-task.manager.url and MDWFramework.MDWDesigner-helpers.url to point to the proxy
 - in etc/system.properties change runtimeEnv to something other than "dev"
 
 enabling tibco bus support (add to instance/bin/setenv):
 --------------------------------------------------------
 LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/tib/MIDD50/tibrv/lib
 
 
 FIX FOR WHEN SOMEONE DELETES THE MDWDEV1 INSTANCE:
 --------------------------------------------------
  - Copy the file /opt/web/servicemix/instances/instance.properties to instance.properties.who_changed_this_file.
  - Back up the mdwdev1 instance directory.
  - Create a new instance by typing these commands from Tommy's setup document:
      - cd /opt/web/servicemix/bin
      - ./admin create {new_instance_name}
  - Restore the backed-up mdwdev1 directory.
  - Start up the restored mdwdev1 instance.
 
 
JMX Connection URL:
-------------------
service:jmx:rmi:///jndi/rmi://lxomavmtc203.dev.qintra.com:1114/karaf-mdwdev1
(karaf/karaf) 1114=rmiRegistryPort from org.apache.karaf.management.cfg
(In VisualVM: File > Add JMX Connection...)

Startup Line to search for in Karaf:
------------------------------------
org.apache.karaf.main.SimpleFileLock lock
