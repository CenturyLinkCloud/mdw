activities:
- id: A3
  name: Start
  implementor: com.centurylink.mdw.workflow.activity.process.ProcessStartActivity
  attributes:
    WORK_DISPLAY_INFO: x=185,y=33,w=32,h=32
  transitions:
  - id: T1
    to: A8
    event: FINISH
    attributes:
      TRANSITION_DISPLAY_INFO: lx=167,ly=76,type=Elbow,xs=199&199,ys=69&112
- id: A1
  name: Still Okay?
  implementor: com.centurylink.mdw.workflow.activity.script.ScriptEvaluator
  attributes:
    Expression: '"Sure"'
    SCRIPT: Groovy
    WORK_DISPLAY_INFO: x=184,y=472,w=32,h=20
  transitions:
  - id: T8
    to: A2
    event: FINISH
    resultCode: Sure
    attributes:
      TRANSITION_DISPLAY_INFO: lx=200,ly=519,type=Elbow,xs=200&200,ys=496&545
- id: A7
  name: Groovy
  implementor: com.centurylink.mdw.workflow.activity.script.ScriptExecutorActivity
  attributes:
    Output Documents: createdDomDoc#createdXmlBean#modifiedDomDoc#modifiedXmlBean
    Rule: "import javax.xml.parsers.DocumentBuilderFactory;\r\nimport org.apache.xmlbeans.*;\r\n\r\nprintln 'Groovy Started 27';\r\n\r\n// create variables\r\ncreatedInt = 8;\r\ncreatedString = \"createdStringValue\";\r\ncreatedXmlBean = XmlObject.Factory.parse(\"<createdXmlBean>\\n  <innerElement attr='attrVal'/>\\n</createdXmlBean>\");\r\ncreatedDomDoc = buildDomDoc();\r\n\r\nmodifiedInt += 10;\r\nmodifiedString += ' has been modified';\r\ndef modCursor = modifiedXmlBean.newCursor();\r\nmodCursor.toFirstChild();\r\nmodCursor.setTextValue(\"MODIFIED\");\r\ndef newCar = modifiedDomDoc.createElement('newCar');\r\nnewCar.setAttribute('shiny', 'new');\r\nmodifiedDomDoc.firstChild.appendChild(newCar);\r\n\r\ntelephoneNumbers.each {\r\n    println 'tn: ' + it\r\n}\r\nprintln 'Groovy Done';\r\n\r\nreturn \"groovyOutcome\";\r\n\r\n\r\ndef buildDomDoc()\r\n{\r\n  def builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\r\n  def document = builder.newDocument();\r\n  def root = document.createElement('records');\r\n  document.appendChild(root);\r\n  def car = document.createElement('car');\r\n  car.setAttribute('make', 'Infiniti');\r\n  car.setAttribute('model', 'G35x');\r\n  car.setAttribute('year', '2005');\r\n  root.appendChild(car);\r\n  def countryNode = document.createElement('country');\r\n  countryNode.appendChild(document.createTextNode('Japan'));\r\n  car.appendChild(countryNode);\r\n  def record = document.createElement('aspect');\r\n  record.setAttribute('type', 'Sedan');\r\n  record.appendChild(document.createTextNode(\"Not too big\"));\r\n  car.appendChild(record);\r\n  \r\n  return document;\r\n}"
    SCRIPT: Groovy
    WORK_DISPLAY_INFO: x=67,y=202,w=24,h=24
  transitions:
  - id: T9
    to: A9
    event: FINISH
    resultCode: groovyOutcome
    attributes:
      TRANSITION_DISPLAY_INFO: lx=41,ly=251,type=Elbow,xs=80&80,ys=230&302
- id: A9
  name: Access Library
  implementor: com.centurylink.mdw.workflow.activity.script.ScriptExecutorActivity
  attributes:
    Rule: "import com.centurylink.mdw.tests.workflow.TnValidator;\r\n\r\ntnVal = new TnValidator();\r\nfor (tn in telephoneNumbers)\r\n{\r\n  if (!tnVal.validate(tn))\r\n    return 'Invalid';\r\n}\r\n\r\n// closure access\r\ntelephoneNumbers.each(tnVal.registerTn);\r\n\r\nreturn 'Valid';\r\n\r\n"
    SCRIPT: Groovy
    WORK_DISPLAY_INFO: x=70,y=306,w=24,h=24
  transitions:
  - id: T5
    to: A6
    event: FINISH
    resultCode: Valid
    attributes:
      TRANSITION_DISPLAY_INFO: lx=70,ly=356,type=ElbowV,xs=81&81&180,ys=334&398&398
- id: A4
  name: JavaScript
  implementor: com.centurylink.mdw.workflow.activity.script.ScriptExecutorActivity
  attributes:
    Output Documents: createdDomDoc#createdXmlBean#modifiedDomDoc#modifiedXmlBean
    Rule: "load(\"nashorn:mozilla_compat.js\");\r\nimportPackage(javax.xml.parsers);\r\nimportPackage(org.apache.xmlbeans);\r\n\r\n// create variables\r\ncreatedInt = 8;\r\ncreatedString = \"createdStringValue\";\r\ncreatedXmlBean = XmlObject.Factory.parse(\"<createdXmlBean>\\n  <innerElement attr='attrVal'/>\\n</createdXmlBean>\");\r\ncreatedDomDoc = buildDomDoc();\r\n\r\nmodifiedInt += 10;\r\nmodifiedString += ' has been modified';\r\nvar modCursor = modifiedXmlBean.newCursor();\r\nmodCursor.toFirstChild();\r\nmodCursor.setTextValue(\"MODIFIED\");\r\nvar newCar = modifiedDomDoc.createElement('newCar');\r\nnewCar.setAttribute('shiny', 'new');\r\nmodifiedDomDoc.firstChild.appendChild(newCar);\r\n\r\n\"javaScriptOutcome\";\r\n\r\n\r\nfunction buildDomDoc()\r\n{\r\n  var builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();\r\n  var document = builder.newDocument();\r\n  var root = document.createElement('records');\r\n  document.appendChild(root);\r\n  var car = document.createElement('car');\r\n  car.setAttribute('make', 'Infiniti');\r\n  car.setAttribute('model', 'G35x');\r\n  car.setAttribute('year', '2005');\r\n  root.appendChild(car);\r\n  var countryNode = document.createElement('country');\r\n  countryNode.appendChild(document.createTextNode('Japan'));\r\n  car.appendChild(countryNode);\r\n  var record = document.createElement('aspect');\r\n  record.setAttribute('type', 'Sedan');\r\n  record.appendChild(document.createTextNode(\"Not too big\"));\r\n  car.appendChild(record);\r\n  \r\n  return document;\r\n}"
    SCRIPT: JavaScript
    WORK_DISPLAY_INFO: x=187,y=217,w=24,h=24
  transitions:
  - id: T4
    to: A6
    event: FINISH
    resultCode: javaScriptOutcome
    attributes:
      TRANSITION_DISPLAY_INFO: lx=155,ly=283,type=Elbow,xs=199&199,ys=245&386
- id: A2
  name: Stop
  implementor: com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity
  attributes:
    DoNotNotifyCaller: 'false'
    WORK_DISPLAY_INFO: x=184,y=549,w=32,h=32
- id: A6
  name: Looking Good?
  implementor: com.centurylink.mdw.workflow.activity.script.ScriptEvaluator
  attributes:
    Expression: '''Yep'''
    SCRIPT: Groovy
    WORK_DISPLAY_INFO: x=184,y=390,w=32,h=20
  transitions:
  - id: T7
    to: A1
    event: FINISH
    resultCode: Yep
    attributes:
      TRANSITION_DISPLAY_INFO: lx=200,ly=441,type=Elbow,xs=200&200,ys=414&468
- id: A8
  name: Script Flavor?
  implementor: com.centurylink.mdw.workflow.activity.script.ScriptEvaluator
  attributes:
    Expression: scriptFlavor
    SCRIPT: Groovy
    WORK_DISPLAY_INFO: x=182,y=116,w=32,h=20
  transitions:
  - id: T2
    to: A7
    event: FINISH
    resultCode: Groovy
    attributes:
      TRANSITION_DISPLAY_INFO: lx=81,ly=155,type=Elbow,xs=178&78&78,ys=126&126&198
  - id: T3
    to: A4
    event: FINISH
    resultCode: JavaScript
    attributes:
      TRANSITION_DISPLAY_INFO: lx=204,ly=170,type=Elbow,xs=199&199,ys=140&213
  - id: T11
    to: A10
    event: FINISH
    resultCode: Unknown
    attributes:
      TRANSITION_DISPLAY_INFO: lx=410,ly=210,type=Elbow,xs=218&553,ys=126&240
- id: A10
  name: Unknown
  implementor: com.centurylink.mdw.workflow.activity.script.ScriptExecutorActivity
  attributes:
    SCRIPT: Groovy
    WORK_DISPLAY_INFO: x=557,y=228,w=24,h=24
  transitions:
  - id: T12
    to: A11
    event: FINISH
    attributes:
      TRANSITION_DISPLAY_INFO: lx=569,ly=285,type=Elbow,xs=569&569,ys=256&314
- id: A11
  name: New Process Finish
  implementor: com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity
  attributes:
    DoNotNotifyCaller: 'false'
    WORK_DISPLAY_INFO: x=553,y=318,w=32,h=32
subprocesses:
- id: P15
  name: Exception Handler
  activities:
  - id: A13
    name: Start
    implementor: com.centurylink.mdw.workflow.activity.process.ProcessStartActivity
    attributes:
      WORK_DISPLAY_INFO: x=443,y=50,w=32,h=32
    transitions:
    - id: T13
      to: A14
      event: FINISH
      attributes:
        TRANSITION_DISPLAY_INFO: lx=512,ly=66,type=Elbow,xs=479&545,ys=66&66
  - id: A14
    name: Stop
    implementor: com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity
    attributes:
      CompletionCode: javaScriptOutcome
      DoNotNotifyCaller: 'false'
      WORK_DISPLAY_INFO: x=549,y=50,w=32,h=32
  attributes:
    EMBEDDED_PROCESS_TYPE: Exception Handler
    PROCESS_VISIBILITY: EMBEDDED
    WORK_DISPLAY_INFO: x=412,y=31,w=204,h=80
variables:
  bystanderDomDoc:
    type: org.w3c.dom.Document
    category: INPUT
  bystanderXmlBean:
    type: org.apache.xmlbeans.XmlObject
    category: INPUT
  createdDomDoc:
    type: org.w3c.dom.Document
    category: LOCAL
  createdInt:
    type: java.lang.String
    category: LOCAL
  createdString:
    type: java.lang.String
    category: LOCAL
  createdXmlBean:
    type: org.apache.xmlbeans.XmlObject
    category: LOCAL
  modifiedDomDoc:
    type: org.w3c.dom.Document
    category: INPUT
  modifiedInt:
    type: java.lang.Integer
    category: INPUT
  modifiedString:
    type: java.lang.String
    category: INPUT
  modifiedXmlBean:
    type: org.apache.xmlbeans.XmlObject
    category: INPUT
  printedString:
    type: java.lang.String
    category: LOCAL
  scriptFlavor:
    type: java.lang.String
    category: INPUT
  telephoneNumbers:
    type: java.util.List<String>
    category: INPUT
attributes:
  ArrowStyle: ArrowEnd
  NodeStyle: Icon
  PROCESS_VISIBILITY: PUBLIC
  START_TRANSITION_ID: '2334952'
  WORK_DISPLAY_INFO: x=27,y=20,w=93,h=27
