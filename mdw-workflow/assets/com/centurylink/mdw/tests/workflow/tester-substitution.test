// tester-substitution
// this is to test the MDW test tool itself
name = "Donald"
helloMessage = "Hello, " + name
masterRequestId = "tester-" + System.currentTimeMillis()

// test send response with substitutions
send asset("tester-ping.xml")
verify response {
    expected = asset("tester-pong.xml").text
}

// test launch process with substitutions
// helloMessage referenced through placeholder in expected result
helloMessage = "Hello from MDW Test"
start process("StartStopProcess") {
    variables = [inputVar: helloMessage]
}
wait process
verify process

assert processInstances.size() == 1
println "master process instance id: " + masterProcessInstance.id
assert masterProcessInstance.masterRequestId == masterRequestId
assert masterProcessInstance.variable["inputVar"] == helloMessage
