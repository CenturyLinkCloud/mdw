<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:osgi="http://www.springframework.org/schema/osgi"
	xmlns:ctx="http://www.springframework.org/schema/context" xmlns:camel="http://camel.apache.org/schema/spring"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi-1.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">
	
	<!-- Active MQ broker - should match the brokerURL in ActiveMQ -->
	<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
		<property name="brokerURL" value="#{T(com.centurylink.mdw.common.utilities.property.PropertyManager).getProperty('mdw.bam.brokerURL')}" />
	</bean>

	<!-- Camel Context for the route from activeMQ to be broadcast to any subscribed Websockets 
	     This is driven by properties to allow BLV on Tomcat and Fuse to use the same spring context file 
	-->	
	<camelContext trace="true" xmlns="http://camel.apache.org/schema/spring">
	    <endpoint id="bam_from_route_uri" uri="#{T(com.centurylink.mdw.common.utilities.property.PropertyManager).getProperty('mdw.bam.route.fromuri')}"/>
	    <endpoint id="bam_to_route_uri" uri="#{T(com.centurylink.mdw.common.utilities.property.PropertyManager).getProperty('mdw.bam.route.touri')}"/>
		<route>
			<from uri="ref:bam_from_route_uri" id="fromJMStoWebSocketBam" />
			<to uri="ref:bam_to_route_uri" />
		</route>


	</camelContext>

</beans>