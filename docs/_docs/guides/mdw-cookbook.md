---
permalink: /docs/guides/mdw-cookbook/
title: MDW Cookbook
---

Let's walk through the essential features of MDW.  All the source code we'll create in this guide
is available to clone in its completed state from the [mdw-demo repository](https://github.com/CenturyLinkCloud/mdw-demo).  

### Setup
  - **Get MDW**  
    The easy way to run MDW locally is by following the [5-minute quick-start](../../getting-started/quick-start).
  - **Install the Designer plugin**  
    Assets can be created and edited in MDWHub, but for serious development you'll want to [install the Eclipse plugin](../../getting-started/install-designer).

### Steps in this Guide
  MDW is a workflow framework specializing in [microservice orchestration](../../presentations/microservices).
  This guide focuses on these aspects, with additional emphasis on manual task handling and MDWHub UI customization.
  For our use case we'll create a bug management workflow. 
  - [Create a service process](#create-a-service-process)
  - [Run the process from Designer](#run-the-process-from-designer)
  - [Expose the process as a REST service](#expose-the-process-as-a-rest-service)
  
### Create a service process
  If you haven't already, import the project generated by the CLI as described in the quick-start guide:
  - From the Eclipse File menu select > Import > General > Existing Projects into Workspaces.  Then browse for your project directory.
  - Switch to the MDW Designer Perspective (Window > Perspective > Open Perspective > Other > MDW Designer).  If you don't see your
    project, try clicking the Refresh toolbar icon ![refresh](../images/refresh.gif) at the top of Process Explorer view.

#### Create a package  
  Everything in MDW is what we call an [Asset](http://centurylinkcloud.github.io/mdw/docs/help/assets.html), and these live in so-called
  asset packages, similar to Java packages except that they contain a whole lot more than .java source files.  Let's create a package for our
  bug handling workflow:
  - Expand your project tree in Process Explorer.  You'll see the mdw6 baseline packages imported by the CLI during `mdw init` or `mdw update`.
    The default package set is pretty scant, but MDW includes quite a few optional packages; some of which we'll cover later.
  - Right-click on your project in Process Explorer and select New > MDW Package.  Name the package `com.centurylink.mdw.demo.bugs`.
    Don't select any Workgroup for now, as this would restrict visibility of your new package.
    ![create package](../images/create-pkg.png)
  
#### Create a process  
  - Right-click on the bugs package and select New > MDW Process.  Name the process `Create Bug`.
    ![create process](../images/create-proc.png)
  
    Finally we can start building.
  
  - Double-click the process title in the Designer canvas.  You'll notice that the associated Properties tab gains focus.  
    Property tabs are how design elements are configured.
  - Select the Design tab for the process and check the Service Process checkbox.  This tells MDW that this process is expected to run 
    synchronously and return a response in real time.
  
#### Add some process variables
  - Now click on the Variables tab.  To start with, let's add a string input variable that'll hold the bug's title.  Name the variable 'bugTitle',
    and make sure its Mode is Input.  To hold the retrieved commit info, add another string variable named 'response' with mode Output.
    Here's what the Variables property tab should look like when you're finished:
    ![add variables](../images/add-vars.png)

#### Add a script activity
  The Designer Toolbox view contains the available activities for building our process.  In MDW, an *activity* is an individual step in a workflow process,
  and an *activity implementor* is a Java class that defines an activity's behavior.  The list of prebuilt activities is [here](../../development/built-in-activities).
  Quite possibly you'll want to extend the toolbox with your own custom activities, and we'll cover that in another section of the cookbook.
  
  - In the Toolbox view locate the activity labeled "Execute Script" and drag it onto the Designer canvas.  Double-click the activity in the canvas,
    and select its Definition property tab.  Change the label from "New Execute Script" to "Validate Request".  Click any blank spot on the canvas to preview this label change.
    
  - Double-click the activity again and select its Script tab. Make sure the language is Groovy, and then click the Edit Script link.
    This opens an Eclipse editor.  Write a script to confirm that the bug title contains less than 512 characters:
    ```groovy
    if (bugTitle.length() > 512)
        response = 'no way'
    else
        response = 'accepted'    
    ```
    Notice how this script has implicit access to the `bugTitle` and `response` variables, for both reading and assigning.
    
  - Save the script editor contents in Eclipse by selecting File > Save from the menu (or by clicking the disk icon in the Eclipse toolbar, or by typing ctrl-s).
    You'll be reminded via a warning dialog that the script content goes with the process, and therefore the process must be saved as well. 
    
  - Now to integrate the script activity into our workflow.  Switch back to the 'Create Bug' process editor again in Designer.
    Select the link (or *transition* in MDW-speak) connecting the Start and Stop activities, and hit Delete.
    Drag the Validate Request activity between Start and Stop.  Next comes the trickiest part of mastering Designer.  We use the so-called "shift-click-drag" mechanism for linking activities on the canvas.
    
  - Hold down the Shift key on your keyboard, click on the upstream activity, and continue holding down the mouse left click button while dragging the cursor 
    to the downstream activity (shift-click-drag).  Repeat this technique to draw links so that your process looks like this:   
    ![script activity](../images/script-activity.png)
    
  - Save your process.  Elect to "Overwrite current version" and to "Remember this selection for future saves". 
    In shared environments MDW needs to support multiple asset versions simultaneously, but for convenience locally you'll mostly overwrite existing versions.  

### Run the process from Designer
  For testing and refining your process, it's convenient to run it from Designer.  For this naturally the MDW server must be running.
  
#### Invoke the process  
  - If your server's not running already, open a command window in your project directory and type `mdw run`.
  
  - Right-click on the Create Bug process in Process Explorer and select Run.  This opens the Eclipse launch configuration dialog.  Click on the Variables
    tab and double-click the Value cell for the bugTitle input variable.  Enter something for the bug title.
    
    ![set variables](../images/set-vars.png)
    
  - Click the Run button to execute your process.
  
#### View the process instance in Designer
  - Right click on Create Bug in Process Explorer and select View Instances.  The Process Instances tab appears, showing a table with the last-run
    instance at the top.  Double-click the instance.  The instance runtime view opens up in the Designer canvas, and in place of the Toolbox the Activity Status
    Legend appears.
    
  - Double-click on the process title or a blank place in the runtime view. Property tabs for an instance contain runtime data for that instance.
    Select the values tab to see the variable values for this instance:
    ![designer process instance](../images/proc-inst-designer.png)

#### View the same instance in MDWHub
  - Fire up your browser and navigate to MDWHub: <http://localhost:8080/mdw>.  Click the Filter button, and in the Status dropdown select Completed.
    Click the Create Bug link for your instance.
    
  - Click the process title or a blank place in the MDWHub runtime view.  The Inspector pane appears.  Click the Values tab in Inspector to view
    variable values:
    ![hub process instance](../images/proc-inst-hub.png)
    
  - To see how a process definition looks in MDWHub, click on the Definition Nav link for the instance.  Click a blank spot in the canvas to view
    design-time attributes for the process.
    
#### Modify the process in MDWHub
  - In MDWHub's Definition view, click the pencil icon button to edit the process.   