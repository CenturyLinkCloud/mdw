<bpm:processDefinition schemaVersion="5.5" xmlns:bpm="http://mdw.centurylink.com/bpm">
  <bpm:Process Id="MainProcess" name="MDWTestLoopBackWaiting" version="0.2" description="">
    <bpm:Activity Id="Activity2" Name="Start" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessStartActivity">
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=144,y=76,w=32,h=32"/>
    </bpm:Activity>
    <bpm:Activity Id="Activity3" Name="New Execute Script" Implementation="com.centurylink.mdw.workflow.activity.script.ScriptExecutorActivity">
      <bpm:Attribute Name="RETURN_CODE" Value="comp"/>
      <bpm:Attribute Name="Rule" Value="comp = &quot;RETRY&quot;;"/>
      <bpm:Attribute Name="SCRIPT" Value="JavaScript"/>
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=498,y=281,w=25,h=23"/>
    </bpm:Activity>
    <bpm:Activity Id="Activity1" Name="Stop" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity">
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=146,y=431,w=32,h=32"/>
    </bpm:Activity>
    <bpm:Activity Id="Activity4" Name="New Script Expression Evaluator" Implementation="com.centurylink.mdw.workflow.activity.script.ScriptExecutorActivity">
      <bpm:Attribute Name="Expression" Value="N = N + 1;&#10;if (N==3) {&#10;    comp = &quot;TEMP&quot;;&#10;} else if (N>5) {&#10;    comp = &quot;DONE&quot;;&#10;} else {&#10;    comp = &quot;RETRY&quot;;&#10;}"/>
      <bpm:Attribute Name="RETURN_CODE" Value="comp"/>
      <bpm:Attribute Name="Rule" Value="N++;&#10;if (N==3) {&#10;    comp = &quot;TEMP&quot;;&#10;} else if (N>5) {&#10;    comp = &quot;DONE&quot;;&#10;} else {&#10;    comp = &quot;RETRY&quot;;&#10;}"/>
      <bpm:Attribute Name="SCRIPT" Value="JavaScript"/>
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=199,y=260,w=24,h=26"/>
    </bpm:Activity>
    <bpm:Transition CompletionCode="" From="Activity2" To="Activity4" Event="FINISH" Id="Transition3">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=185,ly=184,type=Straight,xs=160&amp;211,ys=108&amp;260"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="DONE" From="Activity4" To="Activity1" Event="FINISH" Id="Transition4">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=186,ly=358,type=Straight,xs=211&amp;162,ys=286&amp;431"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="RETRY" From="Activity4" To="Activity4" Event="FINISH" Id="Transition5">
      <bpm:Attribute Name="TRANSITION_DELAY" Value="1"/>
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=199,ly=236,type=Curve,xs=211&amp;226,ys=260&amp;208"/>
      <bpm:Attribute Name="TRANSITION_RETRY_COUNT" Value="3"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="TEMP" From="Activity4" To="Activity3" Event="FINISH" Id="Transition6">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=337,ly=229,type=Curve,xs=223&amp;365&amp;510,ys=273&amp;230&amp;281"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="RETRY" From="Activity3" To="Activity4" Event="FINISH" Id="Transition7">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=342,ly=313,type=Curve,xs=498&amp;350&amp;211,ys=292&amp;331&amp;286"/>
    </bpm:Transition>
    <bpm:Attribute Name="ERROR_PROCESS_ID" Value="262002"/>
    <bpm:Attribute Name="PROCESS_VISIBILITY" Value="PUBLIC"/>
    <bpm:Attribute Name="SLA" Value="0"/>
    <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
    <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=27,y=26,w=239,h=27"/>
    <bpm:Attribute Name="START_TRANSITION_ID" Value="2325804"/>
    <bpm:Variables Name="comp" ReferredAs="" Category="LOCAL" DisplaySequence="0">
      <bpm:type Name="java.lang.String"/>
    </bpm:Variables>
    <bpm:Variables Name="N" ReferredAs="" Category="INPUT" DisplaySequence="0">
      <bpm:type Name="java.lang.String"/>
    </bpm:Variables>
    <bpm:SubProcess Id="SubProcess1" name="Exception Handler" version="0.1" description="">
      <bpm:Activity Id="Activity5" Name="Start" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessStartActivity">
        <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=375,y=53,w=32,h=32"/>
        <bpm:Attribute Name="SLA" Value="0"/>
        <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      </bpm:Activity>
      <bpm:Activity Id="Activity6" Name="New Create Task and Wait" Implementation="com.centurylink.mdw.workflow.activity.task.TaskCreateAndWaitControlledActivity">
        <bpm:Attribute Name="Category" Value="COM"/>
        <bpm:Attribute Name="TaskName" Value="New Create Task and Wait"/>
        <bpm:Attribute Name="Variables" Value="N,N,Not Displayed,0,,java.lang.String;comp,comp,Not Displayed,0,,java.lang.String"/>
        <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=495,y=53,w=24,h=24"/>
        <bpm:Attribute Name="SLA" Value="0"/>
        <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
        <bpm:Attribute Name="TaskLogicalId" Value="MDWTestLoopBackWaiting:Activity6"/>
      </bpm:Activity>
      <bpm:Activity Id="Activity7" Name="Stop" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity">
        <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=615,y=53,w=32,h=32"/>
        <bpm:Attribute Name="SLA" Value="0"/>
        <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      </bpm:Activity>
      <bpm:Transition CompletionCode="" From="Activity5" To="Activity6" Event="FINISH" Id="Transition1">
        <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=451,ly=67,type=Straight,xs=407&amp;495,ys=69&amp;65"/>
      </bpm:Transition>
      <bpm:Transition CompletionCode="" From="Activity6" To="Activity7" Event="FINISH" Id="Transition2">
        <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=567,ly=67,type=Straight,xs=519&amp;615,ys=65&amp;69"/>
      </bpm:Transition>
      <bpm:Attribute Name="PROCESS_VISIBILITY" Value="EMBEDDED"/>
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=335,y=33,w=360,h=80"/>
      <bpm:Attribute Name="ENTRY_TRANSITION_ID" Value="2325805"/>
      <bpm:Attribute Name="START_TRANSITION_ID" Value="2325794"/>
      <bpm:Variables Name="EmbeddedSubProcessTaskAction" ReferredAs="" Category="LOCAL" DisplaySequence="0">
        <bpm:type Name="java.lang.String"/>
      </bpm:Variables>
    </bpm:SubProcess>
  </bpm:Process>
</bpm:processDefinition>