<bpm:processDefinition schemaVersion="5.5" xmlns:bpm="http://mdw.centurylink.com/bpm">
  <bpm:Process Id="MainProcess" name="RestfulServiceAdapterBasicHttpAuth" version="0.1" description="">
    <bpm:Activity Id="A1" Name="Start" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessStartActivity">
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=73,y=171,w=32,h=32"/>
    </bpm:Activity>
    <bpm:Activity Id="A6" Name="Stop" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity">
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=546,y=177,w=32,h=32"/>
    </bpm:Activity>
    <bpm:Activity Id="A2" Name="Sim Mode" Implementation="com.centurylink.mdw.workflow.adapter.rest.RestfulServiceAdapter">
      <bpm:Attribute Name="DO_LOGGING" Value="True"/>
      <bpm:Attribute Name="EndpointUri" Value="http://localhost:7001/Services"/>
      <bpm:Attribute Name="HttpMethod" Value="POST"/>
      <bpm:Attribute Name="REQUEST_VARIABLE" Value="requestDoc"/>
      <bpm:Attribute Name="RESPONSE_VARIABLE" Value="responseDoc"/>
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=215,y=497,w=22,h=18"/>
    </bpm:Activity>
    <bpm:Activity Id="A5" Name="Stop" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity">
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=562,y=399,w=32,h=32"/>
    </bpm:Activity>
    <bpm:Activity Id="A3" Name="Stop" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity">
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=382,y=491,w=32,h=32"/>
    </bpm:Activity>
    <bpm:Activity Id="A9" Name="RESTful&#13;&#10;Action Request" Implementation="com.centurylink.mdw.workflow.adapter.rest.RestfulServiceAdapter">
      <bpm:Attribute Name="ConnectTimeout" Value="60000"/>
      <bpm:Attribute Name="DO_LOGGING" Value="True"/>
      <bpm:Attribute Name="EndpointUri" Value="http://localhost:8080/mdw/Services/REST"/>
      <bpm:Attribute Name="HeadersVariable" Value="headersMap"/>
      <bpm:Attribute Name="HttpMethod" Value="POST"/>
      <bpm:Attribute Name="PASS" Value="Teamweb1!"/>
      <bpm:Attribute Name="PostScriptLang" Value="Groovy"/>
      <bpm:Attribute Name="PreScriptLang" Value="Groovy"/>
      <bpm:Attribute Name="REQUEST_VARIABLE" Value="requestDoc"/>
      <bpm:Attribute Name="RESPONSE_VARIABLE" Value="responseDoc"/>
      <bpm:Attribute Name="ReadTimeout" Value="60000"/>
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="USER" Value="aa72443"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=311,y=411,w=22,h=18"/>
    </bpm:Activity>
    <bpm:Activity Id="A8" Name="RESTful&#13;&#10;Resource Request" Implementation="com.centurylink.mdw.workflow.adapter.rest.RestfulServiceAdapter">
      <bpm:Attribute Name="DO_LOGGING" Value="True"/>
      <bpm:Attribute Name="EndpointUri" Value="http://localhost:8080/MDWHub/resources/com.centurylink.mdw.base/copyright.txt"/>
      <bpm:Attribute Name="HeadersVariable" Value="headersMap"/>
      <bpm:Attribute Name="HttpMethod" Value="GET"/>
      <bpm:Attribute Name="PASS" Value="Teamweb1!"/>
      <bpm:Attribute Name="RESPONSE_VARIABLE" Value="responseDoc"/>
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="USER" Value="aa72443"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=373,y=177,w=22,h=18"/>
    </bpm:Activity>
    <bpm:Activity Id="A7" Name="HTTP Request Type" Implementation="com.centurylink.mdw.workflow.activity.script.ScriptExecutorActivity">
      <bpm:Attribute Name="OsgiBundleSymbolicName" Value="com.centurylink.donsservicemix"/>
      <bpm:Attribute Name="Output Documents" Value="requestDoc"/>
      <bpm:Attribute Name="RETURN_CODE" Value="httpMethod"/>
      <bpm:Attribute Name="Rule" Value="System.out.println(&quot;HTTP Method: &quot; + httpMethod);&#13;&#10;&#13;&#10;if (httpMethod.equals(&quot;POST&quot;) || httpMethod.equals(&quot;SIM&quot;))&#13;&#10;{&#13;&#10;  requestDoc = '''&lt;tns:GetEmployee xmlns:tns=&quot;http://mdw-servicemix.centurylink.com/serviceTypes&quot;>&#13;&#10;  &lt;tns:workstationId>dxoakes&lt;/tns:workstationId>&#13;&#10;&lt;/tns:GetEmployee>''';&#13;&#10; &#13;&#10;}&#13;&#10;  "/>
      <bpm:Attribute Name="SCRIPT" Value="Groovy"/>
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=215,y=169,w=24,h=24"/>
    </bpm:Activity>
    <bpm:Transition CompletionCode="SIM" From="A7" To="A2" Event="FINISH" Id="T1">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=226,ly=338,type=ElbowH,xs=226&amp;226,ys=197&amp;493"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="" From="A2" To="A3" Event="FINISH" Id="T2">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=309,ly=506,type=ElbowH,xs=241&amp;378,ys=506&amp;506"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="" From="A8" To="A6" Event="FINISH" Id="T3">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=474,ly=195,type=Elbow,xs=399&amp;542,ys=186&amp;186"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="GET" From="A7" To="A8" Event="FINISH" Id="T5">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=306,ly=185,type=Elbow,xs=243&amp;369,ys=185&amp;185"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="POST" From="A7" To="A9" Event="FINISH" Id="T6">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=269,ly=297,type=ElbowH,xs=243&amp;307,ys=181&amp;420"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="" From="A1" To="A7" Event="FINISH" Id="T7">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=160,ly=182,type=Elbow,xs=109&amp;211,ys=182&amp;182"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="RETRY" From="A9" To="A9" Event="ERROR" Id="T9">
      <bpm:Attribute Name="TRANSITION_DELAY" Value="30s"/>
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=281,ly=383,type=Curve,xs=322&amp;322,ys=420&amp;400"/>
      <bpm:Attribute Name="TRANSITION_RETRY_COUNT" Value="3"/>
    </bpm:Transition>
    <bpm:Transition CompletionCode="" From="A9" To="A5" Event="FINISH" Id="T12">
      <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=447,ly=420,type=Elbow,xs=337&amp;558,ys=420&amp;420"/>
    </bpm:Transition>
    <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=0,y=0,w=327,h=27"/>
    <bpm:Variables Name="headersMap" ReferredAs="" Category="LOCAL" DisplaySequence="0">
      <bpm:type Name="java.util.Map"/>
    </bpm:Variables>
    <bpm:Variables Name="httpMethod" ReferredAs="" Category="INPUT" DisplaySequence="0">
      <bpm:type Name="java.lang.String"/>
    </bpm:Variables>
    <bpm:Variables Name="requestDoc" ReferredAs="" Category="LOCAL" DisplaySequence="0">
      <bpm:type Name="org.apache.xmlbeans.XmlObject"/>
    </bpm:Variables>
    <bpm:Variables Name="responseDoc" ReferredAs="" Category="LOCAL" DisplaySequence="0">
      <bpm:type Name="com.centurylink.mdw.model.StringDocument"/>
    </bpm:Variables>
    <bpm:SubProcess Id="P10" name="Exception Handler" version="0.5" description="">
      <bpm:Activity Id="A12" Name="Start" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessStartActivity">
        <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=328,y=69,w=32,h=32"/>
      </bpm:Activity>
      <bpm:Activity Id="A11" Name="RestfulServiceAdapter Fallout" Implementation="com.centurylink.mdw.workflow.activity.task.TaskCreateAndWaitControlledActivity">
        <bpm:Attribute Name="AlertIntervalUnits" Value="Hours"/>
        <bpm:Attribute Name="Category" Value="COM"/>
        <bpm:Attribute Name="Groups" Value="Dons Group"/>
        <bpm:Attribute Name="SLAUnits" Value="Hours"/>
        <bpm:Attribute Name="TaskLogicalId" Value="RestfulServiceAdapter:A11"/>
        <bpm:Attribute Name="TaskName" Value="RestfulServiceAdapter Fallout"/>
        <bpm:Attribute Name="Variables" Value="headersMap,headersMap,Not Displayed,0,,java.util.Map;httpMethod,httpMethod,Not Displayed,0,,java.lang.String;requestDoc,requestDoc,Not Displayed,0,,org.apache.xmlbeans.XmlObject;responseDoc,responseDoc,Not Displayed,0,,org.apache.xmlbeans.XmlObject"/>
        <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=458,y=59,w=24,h=24"/>
      </bpm:Activity>
      <bpm:Activity Id="A13" Name="Stop" Implementation="com.centurylink.mdw.workflow.activity.process.ProcessFinishActivity">
        <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=628,y=69,w=32,h=32"/>
      </bpm:Activity>
      <bpm:Transition CompletionCode="" From="A11" To="A13" Event="FINISH" Id="T11">
        <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=555,ly=76,type=Elbow,xs=486&amp;624,ys=76&amp;76"/>
      </bpm:Transition>
      <bpm:Transition CompletionCode="" From="A12" To="A11" Event="FINISH" Id="T10">
        <bpm:Attribute Name="TRANSITION_DISPLAY_INFO" Value="lx=409,ly=76,type=Elbow,xs=364&amp;454,ys=76&amp;76"/>
      </bpm:Transition>
      <bpm:Attribute Name="EMBEDDED_PROCESS_TYPE" Value="Exception Handler"/>
      <bpm:Attribute Name="ENTRY_TRANSITION_ID" Value="2334808"/>
      <bpm:Attribute Name="PROCESS_VISIBILITY" Value="EMBEDDED"/>
      <bpm:Attribute Name="SLA" Value="0"/>
      <bpm:Attribute Name="SLA_UNIT" Value="Seconds"/>
      <bpm:Attribute Name="START_TRANSITION_ID" Value="2334790"/>
      <bpm:Attribute Name="WORK_DISPLAY_INFO" Value="x=288,y=29,w=440,h=120"/>
    </bpm:SubProcess>
  </bpm:Process>
</bpm:processDefinition>