<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:t="http://myfaces.apache.org/tomahawk"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:mdw="http://www.centurylink.com/mdw/jsf">

  <ui:composition>
    
    <mdw:javascriptInclude fileLocation="/script/expandedSelect.js" />

    <mdw:filter
      rendered="#{rendered == null ? true : rendered}"
      name="#{filterEntity.name}"
      value="#{filterEntity.criteria}"
      filterId="#{filterEntity.id}"
      var="crit"
      filterAction="#{filterAction}"
      actionListener="#{filterEntity.actionListener}"
      width="#{width == null ? filterEntity.width : width}"
      showHeader="#{renderHeader == null ? true : renderHeader}"
      styleClass="mdw_filter"      
      headerClass="mdw_pageHeader"
      labelRowClass="mdw_filterSection"
      inputRowClass="mdw_filterItems"
      showCommandButtons="#{renderCommandButtons == null ? true : renderCommandButtons}"
      showPrefsButton="#{renderPrefsButton == null ? true : renderPrefsButton}"
      commandButtonClass="mdw_inputField"
      submitButtonLabel="#{submitButtonLabel == null ? 'Search' : submitButtonLabel}"
      resetButtonLabel="#{resetButtonLabel == null ? ' Reset ' : resetButtonLabel}"
      swapButtonPosition="#{swapButtonPosition}"
      inputTdHeight="22">
      
      <mdw:criteria
        rendered="#{!crit.hidden}"
        label="#{crit.label}">
        <!-- input text criterion -->
        <t:inputText
          id="filterTextInput"
          rendered="#{crit.inputTypeText}"
          sequenceId="#{crit.sequenceId}"          
          value="#{filterEntity.critValue}"
          styleClass="mdw_filterInput" >
        </t:inputText>

        <!-- input digits criterion -->
        <t:inputText
          id="filterDigitInput"
          rendered="#{crit.inputTypeDigit}"
          sequenceId="#{crit.sequenceId}"          
          value="#{filterEntity.critValue}"
          styleClass="mdw_filterInput" >
          <t:validateRegExpr           
            pattern='^[0-9*]+$' />
        </t:inputText>
        <t:message
          for="filterDigitInput" 
          styleClass="mdw_message" 
          detailFormat="Invalid digits." />
          
        <!-- input tn criterion -->
        <t:inputText
          id="filterTnInput"
          rendered="#{crit.inputTypeTn}"
          sequenceId="#{crit.sequenceId}"
          value="#{filterEntity.critValue}"
          styleClass="mdw_filterInput" >
          <t:validateRegExpr           
            pattern='^[0-9-*]+$' />
        </t:inputText>
        <t:message
          for="filterTnInput" 
          styleClass="mdw_message" 
          detailFormat="Invalid TN." />        

        <!-- regular html select input -->
        <t:selectOneMenu
          rendered="#{crit.inputTypeSelect &amp;&amp; !crit.expandable}"
          sequenceId="#{crit.sequenceId}"
          value="#{filterEntity.critValue}"
          styleClass="mdw_filterInput" >
          <f:selectItems value="#{crit.selectValues}" />
        </t:selectOneMenu>

        <!-- expandable dropdown list -->
        <t:panelGroup rendered="#{crit.inputTypeSelect &amp;&amp; crit.expandable}">
          <!-- this is a dumb (non JSF) HTML select simply to provide look and feel -->
          <!-- the selectOneListbox below is the component that interacts with the model -->
          <select
            name="#{crit.sequenceId}:expandableSelect"
            class="mdw_filterInput"
            style="height:18px"
            onclick="dropdown(this, #{crit.sequenceId});"
            onkeydown="key(event, #{crit.sequenceId});">
            <option value="0" selected="selected">#{crit.selectedLabel}</option>
          </select><br style="background-color:white;" />
          <t:selectOneListbox
            id="expandableSelectDropdown"
            sequenceId="#{crit.sequenceId}"
            value="#{filterEntity.critValue}"
            size="10"
            styleClass="mdw_inputField"
            style="position:absolute;visibility:hidden;"
            onclick="selectItem(this, #{crit.sequenceId});"
            onkeydown="dropdownKey(event, #{crit.sequenceId});"
            onblur="collapse(this, #{crit.sequenceId});">          
            <f:selectItems value="#{crit.selectValues}" />
          </t:selectOneListbox>
        </t:panelGroup>
        
        <!-- regular html select input -->
        <t:selectManyMenu
          rendered="#{crit.inputTypeMultiSelect &amp;&amp; !crit.expandable}"
          sequenceId="#{crit.sequenceId}"
          value="#{filterEntity.critValue}"
          styleClass="mdw_filterInput" >
          <f:selectItems value="#{crit.selectValues}" />
        </t:selectManyMenu>

        <!-- expandable dropdown list -->
        <t:panelGroup rendered="#{crit.inputTypeMultiSelect &amp;&amp; crit.expandable}">
          <!-- this is a dumb (non JSF) HTML select simply to provide look and feel -->
          <!-- the selectOneListbox below is the component that interacts with the model -->
          <select
            name="#{crit.sequenceId}:expandableSelect"
            class="mdw_filterInput"
            style="height:18px"
            onclick="dropdown(this, #{crit.sequenceId});"
            onkeydown="key(event, #{crit.sequenceId});">
            <option value="0" selected="selected">#{crit.selectedLabel}</option>
          </select><br style="background-color:white;" />
          <t:selectManyListbox
            id="expandableSelectDropdown"
            sequenceId="#{crit.sequenceId}"
            value="#{filterEntity.critValue}"
            size="10"
            styleClass="mdw_inputField"
            style="position:absolute;visibility:hidden;"
            onclick="selectItem(this, #{crit.sequenceId});"
            onkeydown="dropdownKey(event, #{crit.sequenceId});"
            onblur="collapse(this, #{crit.sequenceId});">          
            <f:selectItems value="#{crit.selectValues}" />
          </t:selectManyListbox>
        </t:panelGroup>
        
        <!-- date criterion -->
        <mdw:date
          rendered="#{crit.inputTypeDate}"
          dateId="dateInput"
          value="#{filterEntity.critValue}"
          sequenceId="#{crit.sequenceId}" />

        <!-- date range criterion -->
        <mdw:dateRange
          rendered="#{crit.inputTypeDateRange}"
          sequenceId="#{crit.sequenceId}"
          fromDateValue="#{filterEntity.critFromDateValue}"
          toDateValue="#{filterEntity.critToDateValue}" />
          
      </mdw:criteria>
      
    </mdw:filter>

  </ui:composition>

</html>
